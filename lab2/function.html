<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Lab 2</title>
  <!-- добавим стили mocha для отображения результатов -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/mocha/3.2.0/mocha.css">
  <!-- добавляем сам фреймворк mocha -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mocha/3.2.0/mocha.js"></script>
  <script>
    // включаем режим тестирования в стиле BDD
    mocha.setup('bdd');
  </script>
  <!-- добавим chai -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/chai/3.5.0/chai.js"></script>
  <script>
    // chai предоставляет большое количество функций. Объявим assert глобально
    let assert = chai.assert;
  </script>
</head>

<body>
  <div id="mocha"></div>

  <!-- ВСТАВКА всех 8 функций -->
  <script>
    function pow(x, n) {
      return x ** n;
    }

    const sumTo = new Function('n', `
      let sum = 0;
      for (let i = 1; i <= n; i++) {
        sum += i;
      }
      return sum;
    `);

    function isLeapYear(year) {
      return year % 400 === 0 || (year % 4 === 0 && year % 100 !== 0);
    }

    function factorial(n) {
      if (n === 0) return 1n;
      return BigInt(n) * factorial(n - 1);
    }

    function fib(n) {
      if (n === 0) return 0n;
      if (n === 1) return 1n;
      let a = 0n, b = 1n;
      for (let i = 2; i <= n; i++) {
        [a, b] = [b, a + b];
      }
      return b;
    }

    function compare(x) {
      return function(y) {
        if (y > x) return true;
        if (y < x) return false;
        return null;
      };
    }

    function sum(...args) {
      return args.reduce((a, b) => a + b, 0);
    }

    function addBlackSpot(obj) {
      obj[Symbol.for("blackSpot")] = true;
      return obj;
    }
  </script>

  <!-- Подключаем тесты -->
  <script src="lab2test.js"></script>

  <!-- запускаем тесты! -->
  <script>
    mocha.run();
  </script>
</body>
</html>
